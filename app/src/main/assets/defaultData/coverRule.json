{
	"enable": true,
	"searchUrl": "data:cover;base64,,{\"type\":\"\"}",
	"coverRule": "@js:\nvar 分隔符=\"&&&\";\nvar 替换分割=\"%%%\"\n//作者规则与封面规则后面可以跟替换净化\n//目前覆盖起点&&&晋江&&&长佩&&&纵横\n//搜索地址:::列表规则:::作者规则:::封面规则\nvar all=\"https://m.qidian.com/soushu/书名.html:::class.y-list__item:::@css:*[class^=_searchBookAuthor]@text%%%作者\\\\s*:::tag.a@tag.img@data-src%%%/\\\\d{2,3}$&&&http://android.jjwxc.net/androidapi/search?keyword=书名:::$.items[*]:::$.authorname:::$.cover&&&https://www.gongzicp.com/webapi/search/novels?k=书名:::$.data.list[*]:::$.novel_author:::$.novel_cover%%%\\\\?.*&&&https://search.zongheng.com/search/book?keyword=书名&sort=&pageNo=1&pageNum=20&isFromHuayu=0:::$.data.datas.list[*]:::$.authorName:::$.coverUrl%%%^%%%https://static.zongheng.com/upload/\";\n\nfunction searchCoverG(){\n\tfunction ti(规则){\n\t\tlet 规则判断=规则.match(/^\\$|\\/\\/|@css|@json/i)?\"\":\"@@\";\n\t\tlet r=规则.split(替换分割);\n\t\tif (r[2]!=undefined&&r[1]!=undefined){\n\t\t\tlet r1=r[1];\n\t\t\tlet r2=r[2];\n\t\t\tlet reg=new RegExp(r1,'g');\n\t\t\treturn String(java.getString(规则判断+r[0])).replace(reg,r2)\n\t\t}else if(r[2]==undefined&&r[1]!=undefined){\n\t\t\tr1=r[1];\n\t\t\treg=new RegExp(r[1],'g');\n\t\t\treturn String(java.getString(规则判断+r[0])).replace(reg,'')\n\t\t}else{\n\t\t\treturn String(java.getString(规则判断+r[0]))\n\t\t}\n\t};\n\trrr=new RegExp(\"(?:\"+分隔符+\")*$\");\n\tall=String(all.replace(rrr,'')+分隔符);\n\tvar cover=\"\";\n\tvar list=all.split(\"&&&\");\n\tfor (i=0;i<list.length-1;i++){\n\t\tvar l=list[i].split(\":::\");\n\t\tlet 搜索地址=l[0];\n\t\t列表规则=l[1];\n\t\t作者规则=l[2];\n\t\t封面规则=l[3];\n\t\t搜索地址=搜索地址.replace(/书名/,book.name);\n\t\thtml=java.ajax(搜索地址);\n\t\tjava.setContent(html);\n\t\t规则判断=列表规则.match(/^\\$|\\/\\/|@css|@json/i)?\"\":\"@@\";\n\t\t列表=java.getElements(规则判断+列表规则);\n\t\tfor (j in 列表){\n\t\t\tjava.setContent(列表[j]);\n\t\t\tauthor=ti(作者规则).replace(/<\\/font.*?>/gi,'');\n\t\t\tif (搜索地址.match(/jjwxc/)&&author.match(/\\*\\*/)){\n\t\t\t\tauthor1=author.replace(/\\*{2,}.*/g,'');\n\t\t\t\tauthor2=author.replace(/.\\*{2,}/,'');\n\t\t\t\tareg=new RegExp(\"^\"+author1);\n\t\t\t\tareg2=new RegExp(author2+\"$\");\n\t\t\t\tif (author.match(areg)&&author.match(areg2)){\n\t\t\t\t\tcover=ti(封面规则);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (author==book.author){\n\t\t\t\tcover=ti(封面规则);\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (cover!=\"\"){\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (cover!=\"\"){\n\t\t\tbreak\n\t\t}\n\t}\n\treturn cover\n};\n\nfunction searchCoverL(){\n\tvar key=book.name;\n\tvar url1=`https://pre-api.tuishujun.com/api/searchBook?search_value=${key}&page=1&pageSize=20`;\n\tvar url2=`http://m.ypshuo.com/api/novel/search?keyword=${key}&searchType=1&page=1`;\n\tvar [rr1,rr2]=java.ajaxAll([url1,url2]).map(r=>r.body());\n\tfunction jjson(str,rule){\n\t\ttry{\n\t\t\treturn com.jayway.jsonpath.JsonPath.read(str,rule)\n\t\t}catch(e){\n\t\t\treturn []\n\t\t}\n\t};\n\trr1=jjson(rr1,'$.data.data[*]');\n\trr2=jjson(rr2,'$.data.data[*]');\n\tvar na=String(book.name),au=String(book.author);\n\tfor (let char of rr1){\n\t\tif (na.includes(char.title+'')){\n\t\t\tlet au2=char.author_nickname+'';\n\t\t\tif (au.includes(au2)||au2.includes(au)){\n\t\t\t\treturn char.cover\n\t\t\t}\n\t\t}\n\t};\n\tfor (let char of rr2){\n\t\tif (na.includes(char.novel_name+'')){\n\t\t\tlet au2=char.author_name+'';\n\t\t\tif (au.includes(au2)||au2.includes(au)){\n\t\t\t\treturn char.novel_img\n\t\t\t}\n\t\t}\n\t};\n\treturn ''\n};\n\nvar cover=searchCoverG()||searchCoverL()||(\"https://t.alcy.cc/mp#\"+Math.ceil(Math.random()*10000));\ncover"
}
